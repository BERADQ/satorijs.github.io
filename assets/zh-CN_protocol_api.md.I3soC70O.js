import{_ as t,l as a,a as e,a6 as d}from"./chunks/framework.DbNgHyU8.js";const _=JSON.parse('{"title":"API","description":"","frontmatter":{},"headers":[],"relativePath":"zh-CN/protocol/api.md","filePath":"zh-CN/protocol/api.md"}'),o={name:"zh-CN/protocol/api.md"},n=d(`<h1 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h1><p>Satori 协议规定了一套基于 HTTP 的 API 服务，用于发送消息和调用其他功能。</p><h2 id="http-api" tabindex="-1">HTTP API <a class="header-anchor" href="#http-api" aria-label="Permalink to &quot;HTTP API&quot;">​</a></h2><p>这是一套 HTTP RPC 风格的 API，所有 URL 的形式均为 <code>/{path}/{version}/{resource}.{method}</code>。其中，<code>path</code> 为部署路径 (可以为空)，<code>version</code> 为 API 的版本号，<code>resource</code> 是资源类型，<code>method</code> 为方法名。</p><p>目前 Satori 仅有 v1 一个版本。</p><p>所有 API 的请求都使用 POST，参数以 <code>application/json</code> 的形式编码在请求体中。返回值也是 JSON 格式。</p><p>请求头中需要包含 <code>X-Platform</code> 和 <code>X-Self-ID</code> 字段，分别表示平台名称和平台账号。</p><p>一个合法的请求示例形如：</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>POST /v1/channel.get</span></span>
<span class="line"><span>Content-Type: application/json</span></span>
<span class="line"><span>Authorization: Bearer 1234567890</span></span>
<span class="line"><span>X-Platform: discord</span></span>
<span class="line"><span>X-Self-ID: 1234567890</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{&quot;channel_id&quot;: &quot;1234567890&quot;}</span></span></code></pre></div><h3 id="状态码" tabindex="-1">状态码 <a class="header-anchor" href="#状态码" aria-label="Permalink to &quot;状态码&quot;">​</a></h3><table><thead><tr><th>状态码</th><th>描述</th></tr></thead><tbody><tr><td>200 (OK)</td><td>请求成功</td></tr><tr><td>400 (BAD REQUEST)</td><td>请求格式错误</td></tr><tr><td>401 (UNAUTHORIZED)</td><td>缺失鉴权</td></tr><tr><td>403 (FORBIDDEN)</td><td>权限不足</td></tr><tr><td>404 (NOT FOUND)</td><td>资源不存在</td></tr><tr><td>405 (METHOD NOT ALLOWED)</td><td>请求方法不支持</td></tr><tr><td>5XX (SERVER ERROR)</td><td>服务器错误</td></tr></tbody></table><h3 id="鉴权" tabindex="-1">鉴权 <a class="header-anchor" href="#鉴权" aria-label="Permalink to &quot;鉴权&quot;">​</a></h3><p>鉴权通过 HTTP API 中的 <code>Authorization</code> 请求头来实现。其中涉及的鉴权令牌由 SDK 分发，本协议不做任何限制。</p><p>如果 SDK 没有配置鉴权，则应用无需提供上述请求头。</p><h3 id="分页" tabindex="-1">分页 <a class="header-anchor" href="#分页" aria-label="Permalink to &quot;分页&quot;">​</a></h3><p>部分 API 可能会返回一组数据。这种情况下，响应会是一个 <code>List</code> 对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td><code>data</code></td><td>array</td><td>数据</td></tr><tr><td><code>next</code></td><td>string?</td><td>下一页的令牌</td></tr></tbody></table><p>你可以使用 <code>next</code> 令牌来获取下一页的数据。如果 <code>next</code> 为空，则表示没有更多数据了。</p><h2 id="扩展-api" tabindex="-1">扩展 API <a class="header-anchor" href="#扩展-api" aria-label="Permalink to &quot;扩展 API&quot;">​</a></h2><p>除了标准的资源 API 外，Satori 还提供了一些扩展 API，用于获取特定的数据。</p><ul><li><code>/{path}/{version}/admin</code> 的子路由用于访问 SDK 相关接口，请参见 <a href="./../advanced/admin.html">管理 API</a>。</li><li><code>/{path}/{version}/internal</code> 的子路由用于访问平台内部接口，请参见 <a href="./../advanced/internal.html">内部 API</a>。</li></ul>`,21),r=[n];function s(p,i,c,l,h,P){return e(),a("div",null,r)}const m=t(o,[["render",s]]);export{_ as __pageData,m as default};
